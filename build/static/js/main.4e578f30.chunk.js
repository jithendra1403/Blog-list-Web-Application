(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{247:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(14),c=n.n(a),i=n(16),s=n(25),o=n(8),u=n.n(o),l=n(11),j=n(19),b=n(313),d=n(312),p=n(29),O=n(4),f=n(287),h=n(290),v=n(292),m=n(40),x=n(293),g=n(294),y=n(126),w=n(299),k=n(295),N=n(37),T=n.n(N),E="/api/blogs",S=null,C={setToken:function(e){S="Bearer ".concat(e)},getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(E);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:S}},e.next=3,T.a.post(E,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:S}},e.next=3,T.a.put("".concat(E,"/").concat(t),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:S}},e.next=3,T.a.delete("".concat(E,"/").concat(t),n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),comment:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:S}},e.next=3,T.a.post("".concat(E,"/").concat(t,"/comments"),{comment:n},r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},I={login:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(e){var t=e.username,n=e.password;return function(){var e=Object(l.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.login({username:t,password:n});case 2:return a=e.sent,r({type:"SET_ACTIVE_USER",data:a}),window.localStorage.setItem("bloglistUser",JSON.stringify(a)),C.setToken(a.token),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_USER":return t.data;case"REMOVE_ACTIVE_USER":return null;default:return e}},B=n(2),R=Object(f.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1,marginLeft:e.spacing(3)},navLink:{textDecoration:"none currentcolor solid"},activeNavLink:{"& $navBtn":{color:e.palette.secondary.light,border:2}},navBtn:{color:e.palette.secondary.contrastText}}})),D=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.activeUser})),n=Object(j.g)(),a=R(),c=Object(r.useState)(null),o=Object(p.a)(c,2),b=o[0],d=o[1],f=Boolean(b);return Object(B.jsx)("div",{className:a.root,children:Object(B.jsx)(h.a,{position:"static",children:Object(B.jsxs)(v.a,{children:[Object(B.jsx)(m.a,{variant:"h5",color:"inherit",className:a.title,children:"Bloglist"}),t?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(s.b,{className:a.navLink,activeClassName:Object(O.a)([a.navLink,a.activeNavLink]),exact:!0,to:"/blogs",children:Object(B.jsx)(x.a,{variant:"text",className:a.navBtn,children:"blogs"})}),Object(B.jsx)(s.b,{className:a.navLink,activeClassName:Object(O.a)([a.navLink,a.activeNavLink]),exact:!0,to:"/users",children:Object(B.jsx)(x.a,{variant:"text",className:a.navBtn,children:"users"})}),Object(B.jsx)(g.a,{"aria-label":"current user's account","aria-controls":"account-menu","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:Object(B.jsx)(k.a,{})}),Object(B.jsxs)(y.a,{id:"account-menu",anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:function(){d(null)},children:[Object(B.jsx)(w.a,{onClick:function(e){e.preventDefault(),d(null),n.push("/users/".concat(t.id))},children:"Account"}),Object(B.jsx)(w.a,{onClick:function(t){t.preventDefault(),d(null),e(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("bloglistUser"),t({type:"REMOVE_ACTIVE_USER"}),C.setToken(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(s.b,{className:a.navLink,activeClassName:Object(O.a)([a.navLink,a.activeNavLink]),exact:!0,to:"/login",children:Object(B.jsx)(x.a,{variant:"text",className:a.navBtn,children:"login"})}),Object(B.jsx)(s.b,{className:a.navLink,activeClassName:Object(O.a)([a.navLink,a.activeNavLink]),exact:!0,to:"/signup",children:Object(B.jsx)(x.a,{variant:"text",className:a.navBtn,children:"signup"})})]})]})})})},_=n(15),U=n(30),q=n(300),F=n(301),P=n(302),z=n(314),G=n(303),V={info:function(){var e;(e=console).log.apply(e,arguments)},error:function(){var e;(e=console).error.apply(e,arguments)}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return function(){var n=Object(l.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"NEW_NOTIFICATION",data:e}),setTimeout((function(){r({type:"REMOVE_NOTIFICATION"})}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_NOTIFICATION":return t.data;case"REMOVE_NOTIFICATION":return null;default:return e}},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=Object(r.useState)(""),a=Object(p.a)(n,2),c=a[0],i=a[1],s=function(e){i(e.target.value)},o=function(){i("")};return{type:t,name:e,value:c,onChange:s,reset:o}},H=["reset"],K=["reset"],$=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),margin:e.spacing(2),"& > *":{margin:e.spacing(2)}},login:{marginLeft:e.spacing(1)}}})),Q=function(){var e=$(),t=Object(i.b)(),n=Object(j.g)(),r=J("username"),a=r.reset,c=Object(U.a)(r,H),s=J("username","password"),o=s.reset,b=Object(U.a)(s,K),d=function(){a(),o()},p=function(){var e=Object(l.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,t(L({username:c.value,password:b.value}));case 4:a=e.sent,d(),t(M({message:"Welcome ".concat(a.name),severity:"success"})),n.push("/"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),d(),V.error(e.t0.response.data),t(M({message:e.t0.response.data.error,severity:"error"}));case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(q.a,{variant:"outlined",className:e.root,children:[Object(B.jsx)(F.a,{title:"LOGIN TO THE APPLICATION"}),Object(B.jsxs)("form",{onSubmit:p,id:"loginForm",children:[Object(B.jsxs)(P.a,{children:[Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"username-input",color:"primary"},c),{},{label:"Username",required:!0,margin:"normal"}))}),Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"password-input",color:"primary"},b),{},{label:"Password",required:!0,margin:"normal"}))})]}),Object(B.jsx)(G.a,{children:Object(B.jsx)(x.a,{variant:"contained",color:"primary",id:"loginButton",type:"submit",className:e.login,children:"Login"})})]})]})},X=n(27),Y=n(304),Z=n(319),ee=n(128),te=n(298),ne=n(248),re=n(306),ae=n(305),ce=n(119),ie=n.n(ce),se=n(73),oe=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.create(e);case 2:r=t.sent,n({type:"ADD_BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.update(e.id,Object(_.a)(Object(_.a)({},e),{},{likes:e.likes+1}));case 2:n({type:"INCREMENT_LIKES",data:{id:e.id}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},le=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.delete(e.id);case 2:n({type:"DELETE_BLOG",data:{id:e.id}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},je=function(e,t){return function(){var n=Object(l.a)(u.a.mark((function n(r){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.comment(e.id,t);case 2:a=n.sent,r({type:"UPDATE_BLOG",data:{blog:a}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data.sort((function(e,t){return t.likes-e.likes}));case"ADD_BLOG":return[].concat(Object(se.a)(e),[t.data]).sort((function(e,t){return t.likes-e.likes}));case"INCREMENT_LIKES":var n=t.data.id,r=e.find((function(e){return e.id===n})),a=Object(_.a)(Object(_.a)({},r),{},{likes:r.likes+1});return e.map((function(e){return e.id!==n?e:a})).sort((function(e,t){return t.likes-e.likes}));case"DELETE_BLOG":var c=t.data.id;return e.filter((function(e){return e.id!==c}));case"UPDATE_BLOG":var i=t.data.blog;return e.map((function(e){return e.id===i.id?i:e}));default:return e.sort((function(e,t){return t.likes-e.likes}))}},de=["reset"],pe=["reset"],Oe=["reset"],fe=function(e){var t=e.toggleVisibility,n=Object(i.b)(),r=J("title"),a=r.reset,c=Object(U.a)(r,de),s=J("title"),o=s.reset,j=Object(U.a)(s,pe),b=J("title","url"),d=b.reset,p=Object(U.a)(b,Oe),O=function(){var e=Object(l.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,n(oe({title:c.value,author:j.value,url:p.value}));case 4:a(),o(),d(),t(),n(M({message:"a new blog: ".concat(c.value," by ").concat(j.value),severity:"success"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(M({message:e.t0.response.data.error,color:"red"}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(q.a,{variant:"outlined",children:[Object(B.jsx)(F.a,{title:"CREATE NEW"}),Object(B.jsxs)("form",{onSubmit:O,children:[Object(B.jsxs)(P.a,{children:[Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"title-input",color:"primary"},c),{},{label:"title",required:!0,margin:"normal"}))}),Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"author-input",color:"primary"},j),{},{label:"author",required:!0,margin:"normal"}))}),Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"url-input",color:"primary"},p),{},{label:"url",required:!0,margin:"normal"}))})]}),Object(B.jsxs)(G.a,{children:[Object(B.jsx)(x.a,{color:"primary",type:"submit",children:"Create"}),Object(B.jsx)(x.a,{color:"default",type:"button",onClick:t,children:"Cancel"})]})]})]})},he=n(7),ve=n.n(he),me=Object(r.forwardRef)((function(e,t){var n=e.button,a=e.children,c=Object(r.useState)(!1),i=Object(p.a)(c,2),s=i[0],o=i[1],u=function(){o(!s)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:u}})),Object(B.jsx)(B.Fragment,{children:s?Object(B.jsx)(B.Fragment,{children:a}):Object(B.jsx)(B.Fragment,{children:n})})}));me.propTypes={button:ve.a.node.isRequired,children:ve.a.node.isRequired},me.displayName="Toggleable";var xe=me,ge=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),"& > *":{margin:e.spacing(2)}},title:{flexGrow:1},newBlogIcon:{fontSize:3*e.typography.fontSize},fab:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},zoom:{transitionDelay:e.transitions.duration.leavingScreen}}})),ye=function(){var e=ge(),t=Object(X.a)(),n=Object(j.g)(),a=Object(i.c)((function(e){return e})).blogs,c={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},s=Object(r.useRef)(null),o=function(){s.current.toggleVisibility()},u=function(e){var t=e.id;return function(e){e.preventDefault(),n.push("/blogs/".concat(t))}};return Object(B.jsxs)("div",{className:e.root,children:[Object(B.jsx)(m.a,{variant:"h3",className:e.title,children:"Blogs"}),Object(B.jsx)(xe,{button:Object(B.jsx)(Y.a,{unmountOnExit:!0,timeout:c,className:e.zoom,in:!0,children:Object(B.jsx)(Z.a,{title:"Add New Blog","aria-label":"Add New Blog",children:Object(B.jsx)(ae.a,{color:"primary",size:"large",className:e.fab,onClick:o,children:Object(B.jsx)(ie.a,{color:"inherit"})})})}),ref:s,children:Object(B.jsx)(fe,{toggleVisibility:o})}),Object(B.jsx)(ee.a,{variant:"outlined",children:Object(B.jsx)(te.a,{children:a.map((function(e){return Object(B.jsx)(ne.a,{alignItems:"flex-start",button:!0,onClick:u(e),children:Object(B.jsx)(re.a,{primary:Object(B.jsx)(m.a,{variant:"h5",children:e.title}),secondary:" by ".concat(e.author)})},e.id)}))})})]})},we=n(315),ke=n(317),Ne=function(){var e=Object(i.c)((function(e){return e.notification}));return Object(B.jsx)("div",{children:Boolean(e)&&Object(B.jsx)(ke.a,{open:Boolean(e),children:Object(B.jsx)(we.a,{severity:e.severity,children:e.message})})})},Te=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),"& > *":{margin:e.spacing(2)}},title:{flexGrow:1},inline:{display:"inline"},list:{width:"100%",backgroundColor:e.palette.background.paper}}}));ye.propTypes={};var Ee=function(){var e=Object(j.g)(),t=Te(),n=Object(i.c)((function(e){return e.users})),r=function(t){var n=t.id;return function(t){t.preventDefault(),e.push("/users/".concat(n))}};return Object(B.jsxs)("div",{className:t.root,children:[Object(B.jsx)(m.a,{variant:"h3",className:t.title,children:"Users"}),Object(B.jsx)(te.a,{className:t.list,children:n.map((function(e){return Object(B.jsx)(ne.a,{alignItems:"flex-start",button:!0,onClick:r(e),children:Object(B.jsx)(re.a,{primary:Object(B.jsx)(m.a,{variant:"h5",to:"/users/".concat(e.id),children:"".concat(e.username)}),secondary:Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(m.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary",children:e.name})," added ".concat(e.blogs.length," blogs")]})})},e.id)}))})]})},Se=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),margin:e.spacing(2),"& > *":{margin:e.spacing(2)}},boldText:{textDecoration:"bold"}}})),Ce=function(){var e=Object(j.h)().id,t=Se(),n=Object(j.g)(),r=Object(i.c)((function(t){return t.users.find((function(t){return t.id.toString()===e}))}));if(!r)return null;var a=function(e){var t=e.id;return function(e){e.preventDefault(),n.push("/blogs/".concat(t))}};return Object(B.jsxs)(q.a,{variant:"outlined",className:t.root,children:[Object(B.jsx)(F.a,{title:r.name,subheader:r.username,titleTypographyProps:{variant:"h3"},subheaderTypographyProps:{variant:"h5"}}),Object(B.jsx)(P.a,{children:r.blogs.length>0?Object(B.jsxs)(q.a,{variant:"outlined",children:[Object(B.jsx)(F.a,{title:"Blogs Added"}),Object(B.jsx)(P.a,{children:Object(B.jsx)(te.a,{children:r.blogs.map((function(e){return Object(B.jsx)(ne.a,{alignItems:"flex-start",button:!0,onClick:a(e),children:Object(B.jsx)(re.a,{primary:Object(B.jsx)(m.a,{variant:"h5",children:e.title}),secondary:" by ".concat(e.author)})},e.id)}))})})]}):Object(B.jsx)(m.a,{variant:"body1",children:"No blogs added by the user"})})]})},Ie="/api/users",Le={getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Ie);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(Ie,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ae=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.create(e);case 2:r=t.sent,n({type:"ADD_USER",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data.sort((function(e,t){return t.blogs.length-e.blogs.length}));case"ADD_USER":return[].concat(Object(se.a)(e),[t.data]);default:return e}},Re=n(72),De=n(311),_e=n(310),Ue=n(120),qe=n.n(Ue),Fe=n(121),Pe=n.n(Fe),ze=n(122),Ge=n.n(ze),Ve=n(307),Me=ve.a.shape({username:ve.a.string.isRequired,name:ve.a.string.isRequired,blogs:ve.a.arrayOf(ve.a.string)}),We=(ve.a.shape({id:ve.a.string.isRequired,title:ve.a.string.isRequired,author:ve.a.string.isRequired,url:ve.a.string.isRequired,likes:ve.a.number.isRequired,user:Me}),["reset"]),Je=Object(f.a)((function(e){return{root:{marginTop:e.spacing(1)},actions:{"& > *":{marginBottom:e.spacing(1)}}}})),He=function(e){var t=e.blog,n=Je(),r=Object(i.b)(),a=J("comment"),c=a.reset,s=Object(U.a)(a,We),o=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,r(je(t,s.value));case 4:c(),r(M({message:'commented on blog: "'.concat(t.title,'"'),severity:"success"})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r(M({message:e.t0.response.data.error,severity:"error"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:n.root,children:[Object(B.jsx)(F.a,{title:"Comments"}),Object(B.jsxs)("form",{onSubmit:o,children:[Object(B.jsx)(P.a,{children:Object(B.jsx)(te.a,{children:Array.from(t.comments.entries(),(function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(B.jsx)(ne.a,{children:Object(B.jsx)(re.a,{primary:r})},n.toString()+r)}))})}),Object(B.jsxs)(G.a,{className:n.actions,children:[Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"comment-input",color:"primary"},s),{},{margin:"normal",size:"small"})),Object(B.jsx)(g.a,{color:"inherit",type:"submit",children:Object(B.jsx)(Ve.a,{})})]})]})]})},Ke=n(318),$e=n(309),Qe=n(308),Xe=Object(f.a)((function(e){return{confirm:{color:e.palette.warning.light}}})),Ye=function(e){var t=e.message,n=e.confirm,r=e.cancel,a=Xe();return Object(B.jsxs)(Ke.a,{open:!0,children:[Object(B.jsx)(Qe.a,{id:"confirm-dialog",children:t}),Object(B.jsxs)($e.a,{children:[Object(B.jsx)(x.a,{onClick:function(e){e.preventDefault(),n()},className:a.confirm,children:"Confirm"}),Object(B.jsx)(x.a,{color:"inherit",onClick:function(e){e.preventDefault(),r()},children:"Cancel"})]})]})},Ze=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),margin:e.spacing(2),"& > *":{margin:e.spacing(2)}},likeButton:{fontSize:e.typography.fontSize,marginRight:e.spacing(4),"& > *":{margin:e.spacing(1)}},deleteButton:{color:e.palette.error.dark,marginRight:e.spacing(4)},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),et=function(){var e=Ze(),t=Object(r.useState)(!1),n=Object(p.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),o=Object(p.a)(s,2),b=o[0],d=o[1],f=Object(i.b)(),h=Object(j.g)(),v=Object(j.h)().id,y=Object(i.c)((function(e){return{blog:e.blogs.find((function(e){return e.id.toString()===v})),activeUser:e.activeUser}})),w=y.blog,k=y.activeUser;if(!w)return null;var N=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(ue(w));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),f(M({message:e.t0.response.data.error,severity:"error"}));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(le(w));case 2:h.push("/blogs");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d(!0)}catch(t){403===t.response.status&&f(M({message:"not your blog to delete, mate!",severity:"error"}))}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsxs)(B.Fragment,{children:[b&&Object(B.jsx)(Ye,{confirm:T,cancel:function(){d(!1)},message:"Delete blog '".concat(w.title,"' by ").concat(w.author,"?")}),Object(B.jsxs)(q.a,{variant:"outlined",className:e.root,children:[Object(B.jsx)(F.a,{title:w.title,subheader:" by ".concat(w.author),titleTypographyProps:{variant:"h3"},subheaderTypographyProps:{variant:"h5"},action:Object(B.jsx)(g.a,{color:"inherit",href:w.url,children:Object(B.jsx)(_e.a,{href:w.url})})}),Object(B.jsx)(P.a,{children:Object(B.jsx)(m.a,{variant:"h6",children:"added by ".concat(w.user.name)})}),Object(B.jsxs)(G.a,{disableSpacing:!0,children:[Object(B.jsx)(x.a,{variant:"outlined",className:e.likeButton,onClick:N,color:"secondary",startIcon:Object(B.jsx)(qe.a,{}),children:Object(B.jsx)("span",{children:"Likes: ".concat(w.likes)})}),k.id===w.user.id&&Object(B.jsx)(g.a,{onClick:E,className:e.deleteButton,children:Object(B.jsx)(Pe.a,{})}),Object(B.jsx)(g.a,{color:"inherit",className:Object(O.a)(e.expand,Object(Re.a)({},e.expandOpen,a)),onClick:function(){c(!a)},"aria-expanded":a,"aria-label":"show more",children:Object(B.jsx)(Ge.a,{})})]}),Object(B.jsx)(De.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(B.jsx)(He,{blog:w})})]})]})},tt=n(123),nt=n.n(tt),rt=["reset"],at=["reset"],ct=["reset"],it=["reset"],st=Object(f.a)((function(e){return{root:{marginTop:e.spacing(5),margin:e.spacing(2),"& > *":{margin:e.spacing(2)}},login:{marginLeft:e.spacing(1)}}})),ot=function(){var e=st(),t=Object(i.b)(),n=Object(j.g)(),a=J("username"),c=a.reset,s=Object(U.a)(a,rt),o=J("name"),b=o.reset,d=Object(U.a)(o,at),O=J("username","password"),f=O.reset,h=Object(U.a)(O,ct),v=J("username","password"),m=v.reset,g=Object(U.a)(v,it),y=Object(r.useState)(null),w=Object(p.a)(y,2),k=w[0],N=w[1],T=Object(r.useState)(null),E=Object(p.a)(T,2),S=E[0],C=E[1];Object(r.useEffect)((function(){nt.a.isStrongPassword(h.value)?N(!0):N(!1),h.value===g.value?C(!0):C(!1)}),[h.value,g.value]);var I=function(){var e=Object(l.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,t(Ae({name:d.value,username:s.value,password:h.value}));case 4:c(),b(),f(),m(),t(M({message:"New account created. Login to continue.",severity:"success"})),n.push("/login"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),V.error(e.t0.response.data),e.t0.response.data.error.includes("User validation failed: username: Error, expected `username` to be unique.")&&(t(M({message:'Username "'.concat(s.value,'" already exists. Login or try a different one.'),severity:"error"})),c(),f(),m());case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(q.a,{variant:"outlined",className:e.root,children:[Object(B.jsx)(F.a,{title:"CREATE A NEW ACCOUNT TO LOGIN"}),Object(B.jsxs)("form",{onSubmit:I,id:"loginForm",children:[Object(B.jsxs)(P.a,{children:[Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"name-input",color:"primary"},d),{},{label:"Name",required:!0,margin:"normal"}))}),Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"username-input",color:"primary"},s),{},{label:"Username",required:!0,margin:"normal"}))}),Object(B.jsx)("div",{children:Object(B.jsx)(Z.a,{title:"Password should be at least 8 characters long and should contain at least one symbol, lower case alphabet and upper case alphabet",children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"new-password-input",color:"primary"},h),{},{label:"New Password",required:!0,margin:"normal",error:!k&&Boolean(h.value),helperText:k||!h.value?null:"Password is not strong enough."}))})}),Object(B.jsx)("div",{children:Object(B.jsx)(z.a,Object(_.a)(Object(_.a)({id:"confirm-password-input",label:"Confirm Password"},g),{},{required:!0,error:h.value!==g.value&&(Boolean(h.value)||Boolean(g.value)),helperText:h.value!==g.value&&(h.value||g.value)?"Passwords do not match":null}))})]}),Object(B.jsx)(G.a,{children:Object(B.jsx)(x.a,{variant:"contained",color:"primary",id:"loginButton",type:"submit",className:e.login,disabled:!k||!S,children:"Create Account"})})]})]})},ut=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.activeUser}));return Object(r.useEffect)(Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=window.localStorage.getItem("bloglistUser"))&&(r=JSON.parse(n),C.setToken(r.token),t({type:"SET_ACTIVE_USER",data:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:e(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),[e]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(d.a,{}),Object(B.jsx)(D,{}),Object(B.jsx)(b.a,{children:null===t?Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(j.d,{children:[Object(B.jsx)(j.b,{path:"/login",children:Object(B.jsx)(Q,{})}),Object(B.jsx)(j.b,{path:"/signup",children:Object(B.jsx)(ot,{})}),Object(B.jsx)(j.b,{path:"/",children:Object(B.jsx)(j.a,{to:"/login"})})]})}):Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(j.d,{children:[Object(B.jsx)(j.b,{path:"/blogs/:id",children:Object(B.jsx)(et,{})}),Object(B.jsx)(j.b,{path:"/users/:id",children:Object(B.jsx)(Ce,{})}),Object(B.jsx)(j.b,{path:"/users",children:Object(B.jsx)(Ee,{})}),Object(B.jsx)(j.b,{path:"/blogs",children:Object(B.jsx)(ye,{})}),Object(B.jsx)(j.b,{path:"/",children:Object(B.jsx)(j.a,{to:"/blogs"})})]})})}),Object(B.jsx)(Ne,{})]})},lt=n(61),jt=n(124),bt=n(125),dt=Object(lt.combineReducers)({notification:W,blogs:be,activeUser:A,users:Be}),pt=Object(lt.createStore)(dt,Object(bt.composeWithDevTools)(Object(lt.applyMiddleware)(jt.a)));c.a.render(Object(B.jsx)(i.a,{store:pt,children:Object(B.jsx)(s.a,{children:Object(B.jsx)(ut,{})})}),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.4e578f30.chunk.js.map